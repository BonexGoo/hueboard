<!doctype html>
<html lang="en-us">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E0S3M2H353"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-E0S3M2H353');
  </script>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <!--Set visual viewport size for mobile devices to the device size,
      which results in a scale of 1 and a 1:1 mapping between CSS pixels
      and Qt device independent pixels. -->
  <meta name="viewport" content="width=device-width, height=device-height, user-scalable=0"/>

  <title>hueboard</title>
  <style>
    /* Make the html body cover the entire (visual) viewport with no scroll bars. */
    html, body { padding: 0; margin: 0; overflow:hidden; height: 100vh }
    /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
    canvas { border: 0px none; background-color: white; height:100%; width:100%;  }
    /* The contenteditable property is set to true for the canvas in order to support
       clipboard events. Hide the resulting focus frame and set the cursor back to
       the default cursor. */
    canvas { outline: 0px solid transparent; caret-color: transparent; cursor:default }

    /* Style for the fullscreen toggle switch */
    .switch {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: relative;
      display: inline-block;
      width: 40px; /* Reduced to 2/3 of original size (60px * 2/3) */
      height: 22px; /* Reduced to 2/3 of original size (34px * 2/3) */
      background-color: #ccc; /* Ensure the background color stays gray */
      border-radius: 22px; /* Adjusted for new height */
      transition: .4s;
      margin-left: 10px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px; /* Reduced to 2/3 of original size (26px * 2/3) */
      width: 18px; /* Reduced to 2/3 of original size (26px * 2/3) */
      left: 3px; /* Adjusted for new size */
      bottom: 2px; /* Adjusted for new size */
      background-color: #FFECB3;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #ccc; /* Keep the background color gray when checked */
    }

    input:checked + .slider:before {
      transform: translateX(18px); /* Adjusted for new width (26px * 2/3) */
    }

    /* Text left of the slider */
    .slider:after {
      content: 'Normal Mode';
      color: black;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      right: 55px; /* Adjust this value as needed */
      font-size: 12px;
      white-space: nowrap; /* Ensure the text stays on one line */
    }

    input:checked + .slider:after {
      content: 'App Mode';
    }
  </style>
</head>
<body onload="init()">
  <figure style="overflow:visible;" id="qtspinner">
    <center style="margin-top:1.5em; line-height:150%">
      <img src="qtlogo.svg" width="320" height="200" style="display:block"></img>
      <strong>Qt for WebAssembly: hueboard</strong>
      <div id="qtstatus"></div>
      <noscript>JavaScript is disabled. Please enable JavaScript to use this application.</noscript>
    </center>
  </figure>

  <canvas id="qtcanvas" oncontextmenu="event.preventDefault()"></canvas>

  <!-- Fullscreen toggle switch -->
  <label class="switch">
    <input type="checkbox" id="fullscreenToggle">
    <span class="slider"></span>
  </label>

  <script type='text/javascript'>
      function init() {
        var spinner = document.querySelector('#qtspinner');
        var canvas = document.querySelector('#qtcanvas');
        var status = document.querySelector('#qtstatus');

        var qtLoader = QtLoader({
            canvasElements : [canvas],
            showLoader: function(loaderStatus) {
                spinner.style.display = 'block';
                canvas.style.display = 'none';
                status.innerHTML = loaderStatus + "...";
            },
            showError: function(errorText) {
                status.innerHTML = errorText;
                spinner.style.display = 'block';
                canvas.style.display = 'none';
            },
            showExit: function() {
                status.innerHTML = "Application exit";
                if (qtLoader.exitCode !== undefined)
                    status.innerHTML += " with code " + qtLoader.exitCode;
                if (qtLoader.exitText !== undefined)
                    status.innerHTML += " (" + qtLoader.exitText + ")";
                spinner.style.display = 'block';
                canvas.style.display = 'none';
            },
            showCanvas: function() {
                spinner.style.display = 'none';
                canvas.style.display = 'block';
            },
        });
        qtLoader.loadEmscriptenModule("hueboard");
    }

    document.querySelector('#qtcanvas').addEventListener('focus', function(event) {
        event.target.blur();
    });

    document.addEventListener('touchstart', function(event) {
        if (event.target === document.querySelector('#qtcanvas')) {
            event.preventDefault();
        }
    }, { passive: false });

    // Fullscreen mode toggle function
    function setFullScreenMode(on) {
        const elem = document.documentElement;
        if (on) {
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.mozRequestFullScreen) { // Firefox
                elem.mozRequestFullScreen();
            } else if (elem.webkitRequestFullscreen) { // Chrome, Safari, Opera, iOS
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) { // IE/Edge
                elem.msRequestFullscreen();
            }
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) { // Firefox
                document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) { // Chrome, Safari, Opera, iOS
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) { // IE/Edge
                document.msExitFullscreen();
            }
        }
    }

    document.getElementById('fullscreenToggle').addEventListener('change', (event) => {
        const isFullscreen = !!(document.fullscreenElement ||
                                document.mozFullScreenElement ||
                                document.webkitFullscreenElement ||
                                document.msFullscreenElement);
        setFullScreenMode(!isFullscreen);
    });
  </script>
  <script type="text/javascript" src="qtloader.js"></script>
</body>
</html>
